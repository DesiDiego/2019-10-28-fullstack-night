<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Evens Odds</title>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<style>
			#button-holder {
				display: flex;
			}
			#button-holder div {
				margin: 10px;
				padding: 10px;
				border: 1px solid black;
			  -webkit-touch-callout: none; /* iOS Safari */
			    -webkit-user-select: none; /* Safari */
			     -khtml-user-select: none; /* Konqueror HTML */
			       -moz-user-select: none; /* Old versions of Firefox */
			        -ms-user-select: none; /* Internet Explorer/Edge */
			            user-select: none;
			}
			.top {
				height: 50px;
			}
		</style>


	</head>
	<body>
		<main id="app">
			<div id="history" class="top">{{cleanHistory}}</div >
			<div id="output" class="top">{{output}}</div >
			<div id="button-holder">
				<calc-button v-for="item in buttonChars" v-bind:button-text="item" v-on:sendbutton="receiveButton"></calc-button>
			</div>
		</main >
		<script>
			var calcButton = {
				props: ['buttonText'],
				template: `<div class='calc-button' v-on:click="$emit('sendbutton', buttonText)">{{buttonText}}</div>`,
			}
			var app = new Vue({
				el: "#app",
				components: {
					calcButton
				},
				data: {
					buttonChars: ['1', '2', '3', '4', 'even', 'odd', 'evaluate'],
					history: ['2', '3', '4', '3'],
					output: '',
				},
				methods: {
					evaluateHistory: function() {
						translate = {
							'0': 0,
							'1': 1,
							'2': 0,
							'3': 1,
							'4': 0,
							'even': 0,
							'odd': 1,
						}
						inArr = []
						for (let i=0; i<this.history.length; i++) {
							inArr.push(this.history[i])
							while (inArr.length >= 2) {
								let newVal = (translate[inArr[0]] + translate[inArr[1]]) % 2;
								inArr.splice(0, 2, newVal);
							}
						};
						this.output = inArr.length === 0? 'nothing there': translate[inArr[0]] === 1 ? 'odd': 'even';
						this.history = [];
					},
					receiveButton: function(inButton) {
						console.log('hi', inButton);
						if (inButton === 'evaluate') {
							this.evaluateHistory();
						} else this.history.push(inButton);
					},
				},
				computed: {
					cleanHistory: function() {
						return this.history.join(' ');
					}
				},
			});
		</script>
	</body>
</html>
